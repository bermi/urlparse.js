<html>
<head>
	<title> urlmatch tests </title>
  <script type="text/javascript" src="doctestjs/doctest.js"></script>
  <link rel="stylesheet" type="text/css" href="doctestjs/doctest.css" />
  <script type="text/javascript" src="../urlmatch.js"></script>
</head>
<body>
<h2> urlmatch.js tests </h2>

<p>
</p>

<div>
  <button onclick="doctest()" type="button">run tests</button>
  <pre id="doctestOutput"></pre>
</div>

Testing url prefix matching

<pre class="doctest">
$ var contains = function(url1, url2) { writeln(URLParse(url1).contains(url2)); };
$ contains("http://apps.mozillalabs.com:80/app", "http://apps.mozillalabs.com/app/somedoc.html");
true
$ contains("http://doma.in/appscope/", "http://doma.in/appscope");
false
$ contains("http://doma.in/appscope", "http://doma.in/appscope/");
true
$ contains("http://doma.in/appscope/", "http://doma.in/appscope/somepath/../../attack.html");
false
$ contains("http://doma.in/appscope/", "http://doma.in/appscope/./still_not_attack.html");
true
$ contains("http://doma.in:80/wtm/", "http://doma.in/wtm/manifest.json");
true
$ contains("http://doma.in:80/wtm/", "http://doma.in/wtm/manifest.json");
true
$ contains("http://doma.in:80", "http://doma.in");
true
$ contains("https://doma.in:443/", "https://doma.in");
true
</pre>
</body>
</html>
