<html>
<head>
	<title> urlmatch tests </title>
  <script type="text/javascript" src="doctestjs/doctest.js"></script>
  <link rel="stylesheet" type="text/css" href="doctestjs/doctest.css" />
  <script type="text/javascript" src="../urlmatch.js"></script>
</head>
<body>
<h2> urlmatch.js tests </h2>

<p>
</p>

<div>
  <button onclick="doctest()" type="button">run tests</button>
  <pre id="doctestOutput"></pre>
</div>

To start with a test of basic url paring:

<pre class="doctest">
$ var parse = function(s) { writeln(JSON.stringify(URL.parse(s),null,4)) };
$ parse("http://apps.mozillalabs.com");
{
    "host": "apps.mozillalabs.com",
    "authority": "apps.mozillalabs.com",
    "scheme": "http",
    "source": "http://apps.mozillalabs.com"
}
$ parse("http://apps.mozillalabs.com/");
{
    "directory": "/",
    "path": "/",
    "relative": "/",
    "host": "apps.mozillalabs.com",
    "authority": "apps.mozillalabs.com",
    "scheme": "http",
    "source": "http://apps.mozillalabs.com/"
}
$ parse("file:///Users/lth/dev/urlmatch/somefile.html");
{
    "file": "somefile.html",
    "directory": "/Users/lth/dev/urlmatch/",
    "path": "/Users/lth/dev/urlmatch/somefile.html",
    "relative": "/Users/lth/dev/urlmatch/somefile.html",
    "scheme": "file",
    "source": "file:///Users/lth/dev/urlmatch/somefile.html"
}
$ parse("https://secu.re:443");
{
    "port": "443",
    "host": "secu.re",
    "authority": "secu.re:443",
    "scheme": "https",
    "source": "https://secu.re:443"
}
$ parse("https://secu.re:443/foo/../bar/x.html");
{
    "file": "x.html",
    "directory": "/foo/../bar/",
    "path": "/foo/../bar/x.html",
    "relative": "/foo/../bar/x.html",
    "port": "443",
    "host": "secu.re",
    "authority": "secu.re:443",
    "scheme": "https",
    "source": "https://secu.re:443/foo/../bar/x.html"
}
$ parse("http://f.oo/dir");
{
    "file": "dir",
    "directory": "/",
    "path": "/dir",
    "relative": "/dir",
    "host": "f.oo",
    "authority": "f.oo",
    "scheme": "http",
    "source": "http://f.oo/dir"
}
$ parse("http://f.oo/dir/");
{
    "directory": "/dir/",
    "path": "/dir/",
    "relative": "/dir/",
    "host": "f.oo",
    "authority": "f.oo",
    "scheme": "http",
    "source": "http://f.oo/dir/"
}
$ parse("http://user@host.com:76543");
{
    "port": "76543",
    "host": "host.com",
    "user": "user",
    "userInfo": "user",
    "authority": "user@host.com:76543",
    "scheme": "http",
    "source": "http://user@host.com:76543"
}
$ parse("http://host.com:12.34/");
{
    "directory": ".34/",
    "path": ".34/",
    "relative": ".34/",
    "port": "12",
    "host": "host.com",
    "authority": "host.com:12",
    "scheme": "http",
    "source": "http://host.com:12.34/"
}
$ parse("http://user:pass@host.com:81?query#anchor");
{
    "anchor": "anchor",
    "query": "query",
    "relative": "?query#anchor",
    "port": "81",
    "host": "host.com",
    "password": "pass",
    "user": "user",
    "userInfo": "user:pass",
    "authority": "user:pass@host.com:81",
    "scheme": "http",
    "source": "http://user:pass@host.com:81?query#anchor",
    "queryKey": {
        "query": ""
    }
}
$ parse("http://:pass@host.com");
{
    "host": "host.com",
    "password": "pass",
    "userInfo": ":pass",
    "authority": ":pass@host.com",
    "scheme": "http",
    "source": "http://:pass@host.com"
}
</pre>
</body>
</html>
